<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robotics Gallery - Jiang (BlueDarkUP)</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üè¥‚Äç‚ò†Ô∏è</text></svg>">
    <meta name="description" content="Jiang (BlueDarkUP) - FTC World Record Holder. Visual journey through FLL, FTC, and RoboMaster competitions.">
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Exo+2:wght@300;600;800&family=Inter:wght@200;400;600&display=swap" rel="stylesheet">

    <style>
        /* 
        ==========================================================================
        MONOCHROME GALLERY THEME
        ========================================================================== 
        */
        :root {
            --bg-deep: #000000;
            --bg-card: #0a0a0a;
            --text-main: #ffffff;
            --text-dim: #888888;
            --border-color: rgba(255, 255, 255, 0.15);
            --accent-glow: rgba(255, 255, 255, 0.08);
            --glass-bg: rgba(20, 20, 20, 0.6);
            --transition: all 0.5s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Inter', -apple-system, sans-serif;
            line-height: 1.7;
            overflow-x: hidden;
            display: flex; flex-direction: column;
            min-height: 100vh;
        }

        /* ÊûÅÁÆÄÂô™Â£∞Âè†Âä† */
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
            opacity: 0.04; pointer-events: none; z-index: -1;
        }

        #cursor-glow {
            position: fixed; width: 500px; height: 500px;
            background: radial-gradient(circle, var(--accent-glow) 0%, transparent 70%);
            border-radius: 50%; pointer-events: none; z-index: -1;
            transform: translate(-50%, -50%); transition: opacity 0.3s;
        }

        /* ÂØºËà™Ê†è (‰∏é‰∏ªÈ°µ‰∏ÄËá¥) */
        .navbar {
            position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 1200px; padding: 15px 40px;
            background: rgba(10, 10, 10, 0.7); backdrop-filter: blur(20px);
            border: 1px solid var(--border-color); border-radius: 100px;
            display: flex; justify-content: space-between; align-items: center;
            z-index: 1000; transition: var(--transition);
        }
        .logo { font-family: 'Exo 2'; font-weight: 800; font-size: 1.2rem; letter-spacing: 1px; text-decoration: none; color: #fff; }
        .nav-links { display: flex; gap: 30px; list-style: none; }
        .nav-links a { text-decoration: none; color: var(--text-dim); font-size: 0.75rem; font-weight: 600; text-transform: uppercase; letter-spacing: 1.5px; transition: var(--transition); }
        .nav-links a:hover, .nav-links a.active { color: var(--text-main); }

        .hamburger { display: none; cursor: pointer; }
        .hamburger .bar { display: block; width: 25px; height: 2px; margin: 6px auto; background-color: #fff; }

        /* ‰∏ªÂÆπÂô® */
        main.container {
            flex-grow: 1; padding: 140px 5% 40px; 
            max-width: 1400px; margin: 0 auto; width: 100%;
            display: flex; flex-direction: column;
        }

        .section-header { text-align: center; margin-bottom: 50px; }
        .section-title { font-family: 'Exo 2'; font-size: 3rem; font-weight: 800; letter-spacing: -1px; margin-bottom: 10px; }
        .section-subtitle { color: var(--text-dim); font-size: 0.9rem; text-transform: uppercase; letter-spacing: 3px; }

        /* ÂàÜÁ±ªÂØºËà™ */
        .category-nav { display: flex; justify-content: center; gap: 15px; margin-bottom: 50px; flex-wrap: wrap; position: relative; }
        .category-btn {
            background: transparent; color: var(--text-dim);
            padding: 10px 25px; border: 1px solid var(--border-color);
            cursor: pointer; font-size: 0.8rem; font-weight: 600;
            text-transform: uppercase; letter-spacing: 1.5px;
            transition: var(--transition);
        }
        .category-btn:hover, .category-btn.active {
            background: #fff; color: #000; border-color: #fff;
        }

        /* ‰∏ãÊãâËèúÂçï */
        .ftc-wrapper { position: relative; }
        .ftc-submenu {
            position: absolute; top: 100%; left: 50%; transform: translateX(-50%) translateY(10px);
            background: var(--bg-card); border: 1px solid var(--border-color);
            padding: 5px; opacity: 0; visibility: hidden; pointer-events: none;
            transition: var(--transition); display: flex; flex-direction: column; gap: 5px; min-width: 160px; z-index: 100;
        }
        .ftc-wrapper:hover .ftc-submenu, .ftc-submenu.show { opacity: 1; visibility: visible; transform: translateX(-50%) translateY(5px); pointer-events: auto; }
        .ftc-submenu .category-btn { width: 100%; text-align: center; border: none; }
        .ftc-submenu .category-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }

        /* ÁîªÂªäÂ∏ÉÂ±Ä */
        .gallery-layout {
            display: grid; grid-template-columns: 350px 1fr; gap: 40px;
            height: 600px; width: 100%;
        }

        /* Â∑¶‰æß‰ø°ÊÅØÈù¢Êùø (ÂçöÁâ©È¶ÜËØ¥ÊòéÁâåÈ£éÊ†º) */
        .gallery-info-panel {
            border-top: 1px solid #fff;
            padding-top: 30px;
            display: flex; flex-direction: column;
            justify-content: space-between;
        }
        #gallery-title { font-family: 'Exo 2'; font-size: 2rem; font-weight: 800; line-height: 1.1; margin-bottom: 15px; }
        #gallery-subtitle { color: var(--text-dim); font-size: 0.95rem; font-weight: 300; margin-bottom: 40px; }
        
        .slide-meta { border-top: 1px solid var(--border-color); padding-top: 20px; }
        #slide-progress { font-family: 'Exo 2'; font-size: 0.8rem; letter-spacing: 2px; color: var(--text-dim); margin-bottom: 10px; display: block; }
        #slide-description { font-size: 1rem; line-height: 1.6; }

        /* Âè≥‰æßÂ±ïÁ§∫Âå∫ */
        .gallery-display-panel {
            position: relative; overflow: hidden;
            background: var(--bg-card); border: 1px solid var(--border-color);
            width: 100%; height: 100%;
        }
        .gallery-content { position: absolute; inset: 0; opacity: 0; visibility: hidden; transition: opacity 0.5s ease; }
        .gallery-content.active { opacity: 1; visibility: visible; }
        
        .gallery-slider-wrapper { position: relative; width: 100%; height: 100%; }
        .gallery-slide {
            position: absolute; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            transition: transform 0.6s cubic-bezier(0.2, 0, 0.2, 1);
            background: #000;
        }
        .gallery-slide img, .gallery-slide iframe {
            width: 100%; height: 100%; object-fit: contain;
        }
        .gallery-slide iframe { border: none; }

        /* ÊéßÂà∂ÊåâÈíÆ */
        .gallery-controls {
            position: absolute; bottom: 20px; right: 20px; display: flex; gap: 10px; z-index: 10;
        }
        .control-button {
            width: 45px; height: 45px;
            border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.5); backdrop-filter: blur(5px);
            color: #fff; cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: var(--transition);
        }
        .control-button:hover { background: #fff; color: #000; border-color: #fff; }
        .control-button svg { width: 20px; height: 20px; fill: currentColor; }

        /* Âä®ÁîªÁä∂ÊÄÅ */
        .fading-out { opacity: 0; transform: translateY(10px); }

        @media (max-width: 1024px) {
            .gallery-layout { grid-template-columns: 1fr; height: auto; }
            .gallery-display-panel { height: 50vh; order: 1; }
            .gallery-info-panel { order: 2; border-top: none; border-left: 1px solid #fff; padding-left: 20px; padding-top: 0; }
        }

        @media (max-width: 768px) {
            .navbar { width: calc(100% - 40px); padding: 15px 20px; }
            .nav-links { display: none; }
            .section-title { font-size: 2rem; }
            .gallery-display-panel { height: 40vh; }
            .gallery-info-panel { border-left: none; border-top: 1px solid #fff; padding-left: 0; padding-top: 20px; }
        }
    </style>
</head>
<body> 

    <div id="cursor-glow"></div>

    <nav class="navbar">
        <a href="index.html" class="logo">BLUEDARKUP.</a>
        <ul class="nav-links">
            <li><a href="index.html#about">About</a></li>
            <li><a href="index.html#projects">Projects</a></li>
            <li><a href="index.html#robotics-contributions" class="active">Gallery</a></li>
            <li><a href="index.html#contact">Contact</a></li>
        </ul>
        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </nav>
    
    <main class="container">
        <div class="section-header">
            <p class="section-subtitle">Visual Archive</p>
            <h1 class="section-title">Robotics Gallery</h1>
        </div>

        <div class="category-nav">
            <button class="category-btn" data-category="fll">FLL AquaHunter</button>
            <div class="ftc-wrapper">
                <button class="category-btn" data-category="ftc-parent">FTC Series</button>
                <div id="ftc-submenu" class="ftc-submenu">
                    <button class="category-btn" data-category="ftc27570">Team 27570 (WR)</button>
                    <button class="category-btn" data-category="ftcCommunity">Community</button>
                </div>
            </div>
            <button class="category-btn" data-category="robomaster">RoboMaster</button>
        </div>

        <div class="gallery-layout">
            <!-- Left Info Panel -->
            <div class="gallery-info-panel">
                <div>
                    <h2 id="gallery-title">Loading...</h2>
                    <p id="gallery-subtitle"></p>
                </div>
                <div class="slide-meta">
                    <span id="slide-progress">01 / 05</span>
                    <p id="slide-description"></p>
                </div>
            </div>

            <!-- Right Display Panel -->
            <div class="gallery-display-panel">
                <!-- FLL -->
                <div id="fll-gallery" class="gallery-content">
                    <div class="gallery-slider-wrapper"></div>
                    <div class="gallery-controls">
                        <button class="control-button prev-slide" data-target="fll"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button>
                        <button class="control-button next-slide" data-target="fll"><svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></button>
                    </div>
                </div>
                <!-- FTC 27570 -->
                <div id="ftc27570-gallery" class="gallery-content">
                    <div class="gallery-slider-wrapper"></div>
                    <div class="gallery-controls">
                        <button class="control-button prev-slide" data-target="ftc27570"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button>
                        <button class="control-button next-slide" data-target="ftc27570"><svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></button>
                    </div>
                </div>
                <!-- FTC Community -->
                <div id="ftcCommunity-gallery" class="gallery-content">
                    <div class="gallery-slider-wrapper"></div>
                    <div class="gallery-controls">
                         <button class="control-button prev-slide" data-target="ftcCommunity"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button>
                        <button class="control-button next-slide" data-target="ftcCommunity"><svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></button>
                    </div>
                </div>
                <!-- RoboMaster -->
                <div id="robomaster-gallery" class="gallery-content">
                    <div class="gallery-slider-wrapper"></div>
                    <div class="gallery-controls">
                        <button class="control-button prev-slide" data-target="robomaster"><svg viewBox="0 0 24 24"><path d="M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></svg></button>
                        <button class="control-button next-slide" data-target="robomaster"><svg viewBox="0 0 24 24"><path d="M8.59 16.59L13.17 12 8.59 7.41 10 6l6 6-6 6z"/></svg></button>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Mobile Menu
            const hamburger = document.querySelector('.hamburger');
            const navLinks = document.querySelector('.nav-links');
            if (hamburger) {
                hamburger.addEventListener('click', () => {
                    hamburger.classList.toggle('active');
                    navLinks.classList.toggle('active'); // Needs corresponding CSS for mobile menu
                });
            }

            // Cursor Glow
            const glow = document.getElementById('cursor-glow');
            if (glow) window.addEventListener('mousemove', (e) => { glow.style.left = e.clientX + 'px'; glow.style.top = e.clientY + 'px'; });

            // Data
            const galleryInfoData = {
                fll: { title: 'FLL AquaHunter', subtitle: 'Ëá™‰∏ªÊ∞¥‰∏ãÊú∫Âô®‰∫∫Á≥ªÁªü (Autonomous ROV)„ÄÇÂü∫‰∫é YOLOv8 ÁöÑÂÖ•‰æµÁâ©ÁßçËøΩË∏™ÊñπÊ°à„ÄÇ' },
                ftc27570: { title: 'FTC Team 27570 (WR)', subtitle: '324 ÂàÜ‰∏ñÁïåÁ∫™ÂΩïËµõÂ≠£„ÄÇÂåó‰∫¨Á¨¨‰∫åÂú∫ËµÑÊ†ºËµõÂÜ†ÂÜõËÅîÁõü‰∏éÂêØÂèëÂ•ñÁ¨¨‰∏ÄÂêç (Inspire 1st)„ÄÇ' },
                ftcCommunity: { title: 'Community Contribution', subtitle: '‰∏∫ FTC Á§æÂå∫ (Â¶Ç19705/28119) Êèê‰æõÁöÑÊäÄÊúØÊîØÊåÅ„ÄÅËßÜËßâ API ‰∏éÂºÄÊ∫êÂ∑•ÂÖ∑„ÄÇ' },
                robomaster: { title: 'RoboMaster RMYC', subtitle: 'Ëá™‰∏ªÂÆàÂç´Êú∫Âô®‰∫∫ (Sentry) ËßÜËßâËá™ÁûÑ‰∏éËøêÂä®ÊéßÂà∂Á≥ªÁªü„ÄÇ' }
            };

            const galleryData = {
                fll: [
                    { type: 'image', src: 'images/fll/FLL-A.jpg', description: 'FLL 2025-2026 ÂõΩÈôÖËµõ‰∫ãÂ§ß‰∏≠ÂçéÂå∫ÂèëÂ∏É‰ª™ÂºèÂêàÂΩ±„ÄÇ' },
                    { type: 'video', youtubeId: 'q-FieT4VC1g', description: 'AquaHunter Ëá™‰∏ªÁ®ãÂ∫è DemoÔºöÈ¶ñÊ¨°ÂÆûÁé∞ÂÖ®Ëá™Âä®Ê∞¥‰∏ãÂ∑°Ëà™„ÄÇ' },
                    { type: 'image', src: 'images/fll/FLL-W.jpg', description: 'FLL ‰∫öÈî¶ËµõÈ¢ÅÂ•ñÁé∞Âú∫ÔºöËç£Ëé∑‰∫öÂÜõ„ÄÇ' },
                    { type: 'image', src: 'images/fll/FLL-T.jpg', description: 'ÂàõÊñ∞Á†îÁ©∂Â±ïÁ§∫ÔºöAquaHunter ËßÜËßâËØÜÂà´ÊñπÊ°àËé∑ÂæóÂÖ®Âú∫ÊúÄÈ´òËØÑ‰ª∑„ÄÇ' },
                    { type: 'image', src: 'images/fll/LIONFISHD.jpg', description: 'YOLOv8 Ê®°ÂûãÂÆûÊó∂Êé®ÁêÜÁîªÈù¢ÔºöÂáÜÁ°ÆËØÜÂà´ÁãÆÂ≠êÈ±º„ÄÇ' },
                    { type: 'video', youtubeId: 'qpJmq-FBLdI', description: 'AquaHunter ËÆ≠ÁªÉÊï∞ÊçÆ‰∏éÊ®°ÂûãË°®Áé∞ËßÜÈ¢ë„ÄÇ' },
                    { type: 'image', src: 'images/fll/FLL-S.jpg', description: 'ÂèëÂ∏É‰ª™ÂºèÊôöÂÆ¥Ôºå‰∏éÂõ¢ÈòüÊàêÂëòÂèäÂØºÂ∏àÂêàÂΩ±„ÄÇ' }
                ],
                ftc27570: [
                    { type: 'video', youtubeId: '5zU5Di1xkyc', description: '27570 ÊúÄÁªàÁâàÊú¨ÔºöË∂ÖÈ´òÁ≤æÂ∫¶ËßÜËßâÁ≥ªÁªüÔºåÂèØËØÜÂà´ÊΩúÊ∞¥Âå∫ÁªÜÂæÆÁõÆÊ†á„ÄÇ' },
                    { type: 'video', youtubeId: '2otmbbGTOR8', description: '‰∏äÊµ∑ËµÑÊ†ºËµõÁâàÊú¨ÔºöÂá≠ÂÄüÁ®≥ÂÅ•ÁöÑËá™Âä®È©æÈ©∂Á®ãÂ∫èÂ§∫ÂæóÊéßÂà∂Â•ñ (Control Award)„ÄÇ' }
                ],
                ftcCommunity: [
                    { type: 'image', src: 'images/ftc/HOUSTONDEBUG.jpg', description: '‰∏∫ FTC 19705 ÂºÄÂèëÁöÑËßÜËßâÁ≥ªÁªüÂú®‰ºëÊñØÈ°ø‰∏ñÈî¶ËµõÂú∫Âú∞ÊµãËØï„ÄÇ' },
                    { type: 'video', youtubeId: '3emosyJK48Q', description: '19705 ‰∏ñÈî¶ËµõÊµãËØïÔºöËá™Âä®Èò∂ÊÆµÈ´òÁ≤æÂ∫¶ÊåÇÊùÜ„ÄÇ' },
                    { type: 'video', youtubeId: 'Xr-lSPC3_i0', description: '19705 ‰∏ñÈî¶ËµõÊµãËØïÔºöËá™Âä®Èò∂ÊÆµÁ≤æÂáÜÊîæÊ°Ü„ÄÇ' },
                    { type: 'video', youtubeId: 'L76KmLFFQG4', description: '19705 ‰∏ñÈî¶ËµõÊµãËØïÔºöÂ§öËâ≤Ê†∑Êú¨Ëá™Âä®ËØÜÂà´‰∏éÊäìÂèñ„ÄÇ' },
                    { type: 'video', youtubeId: '2ydu9OxluLw', description: '19705 ‰∏ñÈî¶ËµõÂÆûÊàòÂΩïÂÉèÔºöÈ´òÁ®≥ÂÆöÊÄßËßÜËßâÁ≥ªÁªüÂä©Âäõ Playoff Ëé∑ËÉú„ÄÇ' },
                    { type: 'image', src: 'images/ftc/HOUSTONT.jpg', description: 'FTC 19705 Âú®‰ºëÊñØÈ°ø‰∏ñÈî¶Ëµõ Playoff ÂèñÂæóÂπ≥Â±Ä„ÄÇ' },
                    { type: 'image', src: 'images/ftc/HOUSTONW.jpg', description: 'FTC 19705 Âú®‰ºëÊñØÈ°ø‰∏ñÈî¶Ëµõ Playoff Ëé∑ËÉúÁû¨Èó¥„ÄÇ' },
                    { type: 'video', youtubeId: 'lET75wiYy0s', description: 'Zero2YOLOYardÔºöÈõÜÊàê‰∫Ü SAM 2.1 ÁöÑ AI ËæÖÂä©Êï∞ÊçÆÊ†áÊ≥®Â∑•ÂÖ∑ÊºîÁ§∫„ÄÇ' },
                    { type: 'video', youtubeId: 'vSaq8Gou4Eo', description: 'FTC MLOpsÔºö4ÂàÜÂçäÈíüÂÜÖÂÆåÊàê‰ªéÁéØÂ¢ÉÈÖçÁΩÆÂà∞Ê®°ÂûãËÆ≠ÁªÉÁöÑÂÖ®Ëá™Âä®ÊµÅÊ∞¥Á∫ø„ÄÇ' },
                    { type: 'video', youtubeId: 'y_3FqC9k9JI', description: 'FTC MLOpsÔºöÊ®°ÂûãÊ£ÄÊü•ÁÇπÂØºÂá∫‰∏éÊâìÂåÖÊºîÁ§∫„ÄÇ' },
                    { type: 'image', src: 'images/ftc/119C.jpg', description: '‰∏∫Êñ∞Èòü‰ºç 28119 ËøõË°åÊäÄÊúØÊåáÂØºÔºöËßÜËßâÁ≥ªÁªüÊû∂ÊûÑ„ÄÇ' },
                    { type: 'image', src: 'images/ftc/119T.jpg', description: '‰∏∫ 28119 ÈòüËÆ≤Ëß£ Java Êú∫Âô®‰∫∫ÁºñÁ®ãÂü∫Á°Ä„ÄÇ' },
                    { type: 'image', src: 'images/ftc/119T2.jpg', description: '‰∏é 28119 ÈòüËøõË°åÊäÄÊúØ‰∫§ÊµÅ‰∏éÁªèÈ™åÂàÜ‰∫´„ÄÇ' }
                ],
                robomaster: [
                    { type: 'video', youtubeId: 'Ogi15fAEs1s', description: 'RM-Hunter Ê≠•ÂÖµÊú∫Âô®‰∫∫ÔºöËá™Âä®ÊîªÂáªÈÄªËæëÂÆûÊµãÔºåÊúâÊïàÂâäÂáèÊïåÊñπÂü∫Âú∞Ë°ÄÈáè„ÄÇ' },
                    { type: 'video', youtubeId: 'p-A05wAB364', description: 'RM-Hunter ËßÜËßâÁ≥ªÁªüÔºöË£ÖÁî≤ÊùøÂÆûÊó∂Ë∑üË∏™„ÄÇ' },
                    { type: 'video', youtubeId: 'vaegsY6iSEk', description: 'RM-Hunter ËßÜËßâÁ≥ªÁªüÔºöÈ´òÂä®ÊÄÅ‰∏ãÁöÑËá™ÁûÑÂáªÊâì„ÄÇ' },
                    { type: 'image', src: 'images/robomaster/RMSHOOT.jpg', description: 'RoboMaster Êó†‰∫∫Êú∫ÊåÇËΩΩÁöÑ‰πí‰πìÁêÉÂèëÂ∞ÑË£ÖÁΩÆÁâπÂÜô„ÄÇ' }
                ]
            };
            
            // UI References
            const categoryButtons = document.querySelectorAll('.category-btn');
            const galleryContents = document.querySelectorAll('.gallery-content');
            const galleryTitleEl = document.getElementById('gallery-title');
            const gallerySubtitleEl = document.getElementById('gallery-subtitle');
            const slideDescriptionEl = document.getElementById('slide-description');
            const slideProgressEl = document.getElementById('slide-progress');
            const ftcSubmenu = document.getElementById('ftc-submenu');

            let currentGalleryState = {};
            let activeCategoryId = '';

            // Video Control
            function stopAllVideos() {
                document.querySelectorAll('.gallery-slide iframe').forEach(iframe => {
                    if (iframe.contentWindow) {
                        iframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                    }
                });
            }

            // Update Text Info with Animation
            function updateInfoPanel(categoryId) {
                const info = galleryInfoData[categoryId];
                if (!info) return;

                const elements = [galleryTitleEl, gallerySubtitleEl, slideDescriptionEl, slideProgressEl];
                elements.forEach(el => el.style.opacity = '0');

                setTimeout(() => {
                    galleryTitleEl.textContent = info.title;
                    gallerySubtitleEl.textContent = info.subtitle;
                    
                    // Restore current slide info
                    if(currentGalleryState[categoryId]) {
                        const idx = currentGalleryState[categoryId].index;
                        const slides = galleryData[categoryId];
                        if(slides && slides[idx]) {
                            slideDescriptionEl.textContent = slides[idx].description;
                            slideProgressEl.textContent = `${String(idx + 1).padStart(2, '0')} / ${String(slides.length).padStart(2, '0')}`;
                        }
                    }
                    elements.forEach(el => el.style.opacity = '1');
                }, 300);
            }

            // Render Slides
            function renderGallery(categoryId) {
                const data = galleryData[categoryId];
                const galleryWrapper = document.querySelector(`#${categoryId}-gallery .gallery-slider-wrapper`);
                galleryWrapper.innerHTML = ''; 

                if (!data || data.length === 0) {
                    galleryWrapper.innerHTML = `<p style="color:#666; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%)">NO DATA.</p>`;
                    return;
                }

                data.forEach(item => {
                    const slide = document.createElement('div');
                    slide.className = 'gallery-slide';
                    if (item.type === 'image') {
                        slide.innerHTML = `<img src="${item.src}" alt="Gallery Image">`;
                    } else if (item.type === 'video') {
                        slide.innerHTML = `<iframe src="https://www.youtube.com/embed/${item.youtubeId}?enablejsapi=1&rel=0" allowfullscreen></iframe>`;
                    }
                    galleryWrapper.appendChild(slide);
                });

                if (!currentGalleryState[categoryId] || currentGalleryState[categoryId].slides?.length !== data.length) {
                     currentGalleryState[categoryId] = { index: 0, slides: galleryWrapper.querySelectorAll('.gallery-slide') };
                } else {
                    currentGalleryState[categoryId].slides = galleryWrapper.querySelectorAll('.gallery-slide');
                }
                
                updateGalleryDisplay(categoryId, true);
            }

            // Slider Logic
            function updateGalleryDisplay(categoryId, isInitial = false) {
                const state = currentGalleryState[categoryId];
                if (!state || !state.slides || state.slides.length === 0) return;
            
                if (!isInitial) stopAllVideos();
            
                const slides = state.slides;
                const currentIndex = state.index;
            
                slides.forEach((slide, i) => {
                    slide.style.transform = `translateX(${(i - currentIndex) * 100}%)`;
                });
            
                // Update text instantly without fade if just sliding
                if (!isInitial) {
                    slideDescriptionEl.textContent = galleryData[categoryId][currentIndex].description;
                    slideProgressEl.textContent = `${String(currentIndex + 1).padStart(2, '0')} / ${String(slides.length).padStart(2, '0')}`;
                }
            }

            function navigateGallery(categoryId, direction) {
                const state = currentGalleryState[categoryId];
                if (!state || state.slides.length <= 1) return;
                state.index = (state.index + direction + state.slides.length) % state.slides.length;
                updateGalleryDisplay(categoryId);
            }

            // Switching Categories
            function showGallery(categoryId) {
                if (activeCategoryId === categoryId) return;
                activeCategoryId = categoryId;
                
                stopAllVideos();
                updateInfoPanel(categoryId);
                
                galleryContents.forEach(content => {
                    content.classList.toggle('active', content.id === `${categoryId}-gallery`);
                });
                
                // Only render if empty to save resources
                if(!document.querySelector(`#${categoryId}-gallery .gallery-slide`)) {
                    renderGallery(categoryId);
                } else {
                    updateGalleryDisplay(categoryId, true); // Refresh display
                }
            }

            // Button Events
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.dataset.category;

                    // Handle styling
                    document.querySelectorAll('.category-nav > .category-btn').forEach(btn => btn.classList.remove('active'));
                    if (this.parentElement.classList.contains('ftc-submenu')) {
                        document.querySelector('[data-category="ftc-parent"]').classList.add('active');
                    } else if (category !== 'ftc-parent') {
                        this.classList.add('active');
                    }

                    if (category === 'ftc-parent') {
                        // Toggle submenu visibility handled by CSS hover mostly, 
                        // but logic here handles default selection
                        const ftcDefault = 'ftc27570';
                        showGallery(ftcDefault);
                    } else {
                        showGallery(category);
                    }
                });
            });

            document.querySelectorAll('.control-button').forEach(button => {
                button.addEventListener('click', function() {
                    const targetCategory = this.dataset.target;
                    const direction = this.classList.contains('next-slide') ? 1 : -1;
                    navigateGallery(targetCategory, direction);
                });
            });

            // Initialize
            document.querySelector('.category-btn[data-category="fll"]').click();
        });
    </script>
</body>
</html>
