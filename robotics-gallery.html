<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æœºå™¨äººè´¡çŒ®é›†é”¦ - Jiang (BlueDarkUP)</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ğŸ”‘</text></svg>">
    <meta name="description" content="Jiang (BlueDarkUP) åœ¨ FLL, FTC, RoboMaster æœºå™¨äººç«èµ›ä¸­çš„è§†è§‰è´¡çŒ®é›†é”¦ï¼ŒåŒ…å«å›¾ç‰‡å’Œè§†é¢‘ã€‚">
    <meta name="author" content="Jiang (BlueDarkUP)">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/devicons/devicon@v2.15.1/devicon.min.css">
    <style>
        /* ä» index.html å¤åˆ¶çš„ä¸»é¢˜é¢œè‰²å˜é‡ */
        body.theme-green {
            --primary-color: #336A29;
            --primary-color-transparent: rgba(51, 106, 41, 0.85);
            --primary-color-darker: #26501f;
            --secondary-color: #80B155;
            --secondary-color-transparent-1: rgba(128, 177, 85, 0.1);
            --secondary-color-transparent-2: rgba(128, 177, 85, 0.2);
            --secondary-color-transparent-4: rgba(128, 177, 85, 0.4);
            --secondary-color-transparent-5: rgba(128, 177, 85, 0.5);
            --secondary-color-transparent-gradient: rgba(128, 177, 85, 0.07);
            --text-color-light: #EAEF9D;
            --text-color-dark: #C1D95C;
            --cta-hover-text-color: #336A29;
        }

        body.theme-blue {
            --primary-color: #2C6975;
            --primary-color-transparent: rgba(44, 105, 117, 0.85);
            --primary-color-darker: #1f4a53;
            --secondary-color: #68B2A0;
            --secondary-color-transparent-1: rgba(104, 178, 160, 0.15);
            --secondary-color-transparent-2: rgba(104, 178, 160, 0.2);
            --secondary-color-transparent-4: rgba(104, 178, 160, 0.4);
            --secondary-color-transparent-5: rgba(104, 178, 160, 0.5);
            --secondary-color-transparent-gradient: rgba(104, 178, 160, 0.07);
            --text-color-light: #E0ECDE;
            --text-color-dark: #CDE0C9;
            --cta-hover-text-color: #2C6975;
        }

        body.theme-orange {
            --primary-color: #A94A3A;
            --primary-color-transparent: rgba(169, 74, 58, 0.85);
            --primary-color-darker: #82392c;
            --secondary-color: #F37121;
            --secondary-color-transparent-1: rgba(243, 113, 33, 0.15);
            --secondary-color-transparent-2: rgba(243, 113, 33, 0.2);
            --secondary-color-transparent-4: rgba(243, 113, 33, 0.4);
            --secondary-color-transparent-5: rgba(243, 113, 33, 0.5);
            --secondary-color-transparent-gradient: rgba(243, 113, 33, 0.07);
            --text-color-light: #F7D154;
            --text-color-dark: #FFCBA4;
            --cta-hover-text-color: #A94A3A;
        }
        
        body.theme-gray {
            --primary-color: #2c2c2c;
            --primary-color-transparent: rgba(44, 44, 44, 0.85);
            --primary-color-darker: #1e1e1e;
            --secondary-color: #9B9B9B;
            --secondary-color-transparent-1: rgba(155, 155, 155, 0.15);
            --secondary-color-transparent-2: rgba(155, 155, 155, 0.2);
            --secondary-color-transparent-4: rgba(155, 155, 155, 0.4);
            --secondary-color-transparent-5: rgba(155, 155, 155, 0.5);
            --secondary-color-transparent-gradient: rgba(155, 155, 155, 0.07);
            --text-color-light: #FFFFFF;
            --text-color-dark: #E7E7E7;
            --cta-hover-text-color: #2c2c2c;
        }

        body.theme-dopamine {
            --primary-color: #5D3776;
            --primary-color-transparent: rgba(93, 55, 118, 0.85);
            --primary-color-darker: #432856;
            --secondary-color: #F57B92;
            --secondary-color-transparent-1: rgba(245, 123, 146, 0.15);
            --secondary-color-transparent-2: rgba(245, 123, 146, 0.2);
            --secondary-color-transparent-4: rgba(245, 123, 146, 0.4);
            --secondary-color-transparent-5: rgba(245, 123, 146, 0.5);
            --secondary-color-transparent-gradient: rgba(245, 123, 146, 0.07);
            --text-color-light: #FEF0A5;
            --text-color-dark: #A8D8F0;
            --cta-hover-text-color: #5D3776;
        }

        body.theme-aurora {
            --primary-color: #055B5C;
            --primary-color-transparent: rgba(5, 91, 92, 0.85);
            --primary-color-darker: #033c3d;
            --secondary-color: #6EC6CA;
            --secondary-color-transparent-1: rgba(110, 198, 202, 0.15);
            --secondary-color-transparent-2: rgba(110, 198, 202, 0.2);
            --secondary-color-transparent-4: rgba(110, 198, 202, 0.4);
            --secondary-color-transparent-5: rgba(110, 198, 202, 0.5);
            --secondary-color-transparent-gradient: rgba(110, 198, 202, 0.07);
            --text-color-light: #CCABD8;
            --text-color-dark: #8474A1;
            --cta-hover-text-color: #055B5C;
        }
        
        body.theme-oasis {
            --primary-color: #DBCBBE;
            --primary-color-transparent: rgba(219, 203, 190, 0.85);
            --primary-color-darker: #C9B9AD;
            --secondary-color: #4D8581;
            --secondary-color-transparent-1: rgba(77, 133, 129, 0.1);
            --secondary-color-transparent-2: rgba(77, 133, 129, 0.2);
            --secondary-color-transparent-4: rgba(77, 133, 129, 0.4);
            --secondary-color-transparent-5: rgba(77, 133, 129, 0.5);
            --secondary-color-transparent-gradient: rgba(77, 133, 129, 0.07);
            --text-color-light: #4E443F;
            --text-color-dark: #6F6159;
            --cta-hover-text-color: #EEE7DF;
        }
        
        body.theme-soda {
            --primary-color: #FBFAF5;
            --primary-color-transparent: rgba(251, 250, 245, 0.85);
            --primary-color-darker: #F5F2EA;
            --secondary-color: #81D8CF;
            --secondary-color-transparent-1: rgba(129, 216, 207, 0.15);
            --secondary-color-transparent-2: rgba(129, 216, 207, 0.2);
            --secondary-color-transparent-4: rgba(129, 216, 207, 0.4);
            --secondary-color-transparent-5: rgba(129, 216, 207, 0.5);
            --secondary-color-transparent-gradient: rgba(129, 216, 207, 0.07);
            --text-color-light: #33645F;
            --text-color-dark: #5E8480;
            --cta-hover-text-color: #FBFAF5;
        }
        
        body.theme-bordeaux {
            --primary-color: #4C0013;
            --primary-color-transparent: rgba(76, 0, 19, 0.85);
            --primary-color-darker: #33000d;
            --secondary-color: #FF7B89;
            --secondary-color-transparent-1: rgba(255, 123, 137, 0.15);
            --secondary-color-transparent-2: rgba(255, 123, 137, 0.2);
            --secondary-color-transparent-4: rgba(255, 123, 137, 0.4);
            --secondary-color-transparent-5: rgba(255, 123, 137, 0.5);
            --secondary-color-transparent-gradient: rgba(255, 123, 137, 0.07);
            --text-color-light: #f5dde1;
            --text-color-dark: #8A5082;
            --cta-hover-text-color: #4C0013;
        }

        /* ä» index.html å¤åˆ¶çš„é€šç”¨æ ·å¼ */
        :root {
            --font-sans: 'Segoe UI', 'Roboto', 'Helvetica Neue', system-ui, sans-serif;
            --background-light: var(--secondary-color-transparent-1);
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: var(--font-sans);
            background: linear-gradient(180deg, var(--primary-color) 0%, var(--primary-color-darker) 100%);
            background-attachment: fixed;
            color: var(--text-color-light);
            margin: 0;
            padding: 0;
            line-height: 1.6;
            transition: background-color 0.3s ease, color 0.3s ease;
            min-height: 100vh; /* ç¡®ä¿å†…å®¹ä¸è¶³æ—¶ä¹Ÿæœ‰é«˜åº¦ */
            display: flex;
            flex-direction: column;
        }
        #preloader {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--primary-color); z-index: 9999;
            display: flex; justify-content: center; align-items: center;
            transition: opacity 0.8s ease-in-out, visibility 0.8s ease-in-out;
            visibility: visible; opacity: 1; will-change: opacity, visibility;
        }
        #preloader.loaded { opacity: 0; visibility: hidden; pointer-events: none; }
        .rocket-container { text-align: center; animation: takeOff 2.6s ease-in-out forwards; will-change: transform, opacity; }
        .rocket-container svg { width: 150px; height: 150px; margin-bottom: 20px; }
        .loading-text { color: var(--text-color-dark); font-size: 1.2em; letter-spacing: 2px; opacity: 0; animation: fadeInText 1s ease-in 0.5s forwards; }
        @keyframes takeOff {
            0% { transform: translateY(60px); opacity: 0; }
            25% { transform: translateY(0); opacity: 1; }
            80% { transform: translateY(0); opacity: 1; }
            100% { transform: translateY(-120px); opacity: 0; }
        }
        @keyframes fadeInText { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 250 250' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.8' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.03; pointer-events: none; z-index: 0;
        }
        #cursor-glow {
            pointer-events: none; position: fixed; top: 0; left: 0;
            width: 600px; height: 600px; border-radius: 50%;
            background: radial-gradient(circle, var(--secondary-color-transparent-gradient), transparent 60%);
            transform: translate(-50%, -50%); transition: top 0.1s ease-out, left 0.1s ease-out; z-index: 0;
        }
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--primary-color); }
        ::-webkit-scrollbar-thumb { background-color: var(--secondary-color); border-radius: 10px; opacity: 0.7; }
        ::-webkit-scrollbar-thumb:hover { background-color: var(--text-color-light); }
        .container { max-width: 1100px; margin: 0 auto; padding: 0 40px; position: relative; z-index: 1; flex-grow: 1; }
        .navbar {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 40px; position: fixed; width: calc(100% - 80px); top: 0;
            background-color: var(--primary-color-transparent); backdrop-filter: blur(10px);
            z-index: 1000; transition: padding 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .navbar.scrolled { padding-top: 10px; padding-bottom: 10px; box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2); }
        .logo { font-weight: bold; font-size: 1.8em; color: var(--text-color-light); text-decoration: none; z-index: 1001; }
        .nav-links { list-style: none; display: flex; gap: 25px; margin: 0; padding: 0; }
        .nav-links a {
            color: var(--text-color-light); text-decoration: none; transition: color 0.3s ease;
            font-size: 0.95em; position: relative; padding: 5px 0;
        }
        .nav-links a::after {
            content: ''; position: absolute; width: 100%; height: 2px;
            background-color: var(--secondary-color); bottom: 0; left: 0;
            transform: scaleX(0); transform-origin: left; transition: transform 0.3s ease-in-out;
        }
        .nav-links a:hover { color: var(--secondary-color); }
        .nav-links a:hover::after { transform: scaleX(1); }
        .hamburger { display: none; cursor: pointer; z-index: 1001; }
        .hamburger .bar {
            display: block; width: 25px; height: 3px; margin: 5px auto;
            -webkit-transition: all 0.3s ease-in-out; transition: all 0.3s ease-in-out;
            background-color: var(--text-color-light);
        }
        section { padding: 120px 0; min-height: 80vh; }
        .fade-in {
            opacity: 0; transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
            will-change: transform, opacity;
        }
        .fade-in.is-visible { opacity: 1; transform: translateY(0); }
        .section-title {
            font-size: 2.5em; margin-bottom: 50px; position: relative;
            display: inline-block; color: var(--text-color-light);
        }
        .section-title::after {
            content: ''; display: block; width: 50%; height: 3px;
            background-color: var(--secondary-color); margin-top: 10px;
        }
        .cta-button {
            display: inline-block; padding: 14px 28px; border: 1px solid var(--secondary-color);
            color: var(--secondary-color); text-decoration: none; border-radius: 4px;
            margin-top: 30px; transition: background-color 0.3s ease, color 0.3s ease; font-size: 1em;
        }
        .cta-button:hover { background-color: var(--secondary-color); color: var(--cta-hover-text-color); }
        .theme-switcher {
            margin-bottom: 20px; display: flex; justify-content: center; align-items: center; gap: 10px;
        }
        .theme-switcher label { font-size: 0.95em; color: var(--text-color-dark); }
        .theme-switcher select {
            background-color: var(--primary-color); color: var(--text-color-dark);
            border: 1px solid var(--secondary-color); padding: 5px 10px;
            border-radius: 4px; font-family: var(--font-sans); font-size: 0.9em; cursor: pointer;
        }
        .theme-switcher select:focus { outline: 2px solid var(--secondary-color); outline-offset: 2px; }
        .back-to-top {
            position: fixed; bottom: 20px; right: 20px;
            background-color: var(--secondary-color-transparent-2); border: 1px solid var(--secondary-color);
            color: var(--secondary-color); width: 40px; height: 40px; border-radius: 50%;
            display: flex; align-items: center; justify-content: center; cursor: pointer;
            opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s, background-color 0.3s; z-index: 999;
        }
        .back-to-top:hover { background-color: var(--secondary-color-transparent-4); }
        .back-to-top.visible { opacity: 1; visibility: visible; }
        .back-to-top::after { content: 'â†‘'; font-size: 1.5em; font-weight: bold; }

        @media (max-width: 768px) {
            .nav-links {
                position: fixed; left: -100%; top: 0; flex-direction: column;
                background-color: var(--primary-color); width: 100%; height: 100vh;
                text-align: center; transition: 0.3s; justify-content: center; gap: 50px;
            }
            .nav-links.active { left: 0; }
            .nav-links a { font-size: 1.5em; }
            .hamburger { display: block; }
            .hamburger.active .bar:nth-child(2) { opacity: 0; }
            .hamburger.active .bar:nth-child(1) { transform: translateY(8px) rotate(45deg); }
            .hamburger.active .bar:nth-child(3) { transform: translateY(-8px) rotate(-45deg); }
            #cursor-glow { display: none; }
        }

        /* æœºå™¨äººé›†é”¦é¡µç‰¹å®šæ ·å¼ */
        main.container {
            padding-top: 100px; /* é¿å…è¢«å›ºå®šå¯¼èˆªæ é®æŒ¡ */
        }

        .category-nav {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 60px;
            margin-top: 30px;
        }

        .category-btn {
            background-color: var(--background-light);
            color: var(--text-color-light);
            padding: 12px 25px;
            border: 1px solid var(--secondary-color-transparent-5);
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
            text-decoration: none; /* For nested links */
            display: inline-flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }
        .category-btn:hover {
            background-color: var(--secondary-color);
            color: var(--cta-hover-text-color);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .category-btn.active {
            background-color: var(--secondary-color);
            color: var(--cta-hover-text-color);
            border-color: var(--secondary-color);
            box-shadow: 0 0 15px var(--secondary-color-transparent-4);
            font-weight: bold;
        }

        /* FTC Sub-menu */
        .ftc-submenu {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-left: 20px;
            padding-left: 10px;
            border-left: 2px solid var(--secondary-color-transparent-2);
        }
        .ftc-submenu .category-btn {
            padding: 8px 15px;
            font-size: 0.95em;
        }

        /* Gallery Container & Slider */
        .gallery-section {
            display: none; /* é»˜è®¤éšè— */
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
            padding: 40px 0;
            text-align: center;
            background-color: var(--background-light);
            border-radius: 8px;
            position: relative;
            min-height: 500px; /* ç¡®ä¿æœ‰è¶³å¤Ÿç©ºé—´ */
            display: flex; /* Flexbox for centering */
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
        .gallery-section.active {
            display: flex; /* æ˜¾ç¤ºæ¿€æ´»çš„ Section */
            opacity: 1;
        }

        .gallery-title {
            font-size: 2em;
            color: var(--text-color-light);
            margin-bottom: 30px;
        }
        .gallery-subtitle {
            font-size: 1.1em;
            color: var(--text-color-dark);
            margin-bottom: 40px;
            max-width: 800px;
        }

        .gallery-slider-wrapper {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 500px; /* æ§åˆ¶æ»‘å—é«˜åº¦ */
            overflow: hidden;
            margin: 0 auto;
            perspective: 1000px; /* 3Dé€è§†æ•ˆæœ */
            transform-style: preserve-3d;
            background-color: var(--primary-color-darker);
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 30px;
        }

        .gallery-slide {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-color: var(--primary-color); /* å•ä¸ªæ»‘å—èƒŒæ™¯ */
            border-radius: 10px;
            overflow: hidden;
            transition: transform 0.6s ease-in-out, opacity 0.6s ease-in-out, z-index 0s 0.3s; /* z-indexå»¶è¿Ÿåˆ‡æ¢ */
            box-shadow: 0 0 15px rgba(0,0,0,0.3);
            backface-visibility: hidden; /* é¿å…èƒŒé¢é—ªçƒ */
            will-change: transform, opacity;
            z-index: 1; /* é»˜è®¤Zè½´é¡ºåº */
        }

        .gallery-slide img, .gallery-slide .video-embed {
            max-width: 90%;
            max-height: 70%;
            object-fit: contain; /* ç¡®ä¿å›¾ç‰‡å®Œæ•´æ˜¾ç¤º */
            border-radius: 8px;
            display: block;
            margin-bottom: 15px;
        }
        .gallery-slide .video-embed {
            width: 90%;
            height: 70%;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .gallery-slide .video-embed iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 8px;
        }

        .slide-description {
            color: var(--text-color-light);
            font-size: 1.1em;
            max-width: 80%;
            margin: 0 auto;
            text-align: center;
        }

        /* æ»‘åŠ¨æ§åˆ¶æŒ‰é’® */
        .gallery-controls {
            position: absolute;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            top: 50%;
            transform: translateY(-50%);
            padding: 0 15px;
            z-index: 10;
        }

        .control-button {
            background-color: var(--secondary-color-transparent-4);
            color: var(--text-color-light);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 2em;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: background-color 0.3s ease, transform 0.2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        .control-button:hover {
            background-color: var(--secondary-color);
            transform: scale(1.1);
        }
        .control-button:active {
            transform: scale(0.95);
        }

        /* å †å å’Œæ»‘åŠ¨æ•ˆæœçš„å…³é”® CSS */
        /*
         * å…³äºå †å æ•ˆæœçš„è¯´æ˜ï¼š
         * çœŸæ­£çš„3Då †å ï¼ˆZè½´ä½ç§»ï¼‰ç»“åˆä»å³å¾€å·¦çš„æ»‘åŠ¨ï¼Œç”¨çº¯CSSå®ç°ä¼šéå¸¸å¤æ‚ä¸”å…¼å®¹æ€§å·®ã€‚
         * è¿™é‡Œé‡‡ç”¨çš„æ˜¯è§†è§‰ä¸Šçš„â€œå †å â€æ¨¡æ‹Ÿï¼š
         * - `current` å…ƒç´ åœ¨æœ€å‰é¢ï¼Œå®Œå…¨å¯è§ã€‚
         * - `prev` å’Œ `next` å…ƒç´ é€šè¿‡ `translateX` ç§»å‡ºè§†é‡ï¼Œå¹¶é™ä½ `opacity`ï¼Œ
         *   å®ƒä»¬å„è‡ªçš„ `z-index` ç¡®ä¿åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­è§†è§‰ä¸Šæ˜¯â€œä»åé¢æ»‘èµ°â€æˆ–â€œä»åé¢æ»‘å…¥â€ã€‚
         * - `z-index` çš„åˆ‡æ¢å»¶è¿Ÿ (`z-index 0s 0.3s`) ç¡®ä¿åœ¨åŠ¨ç”»å¼€å§‹åæ‰æ”¹å˜å›¾å±‚é¡ºåºï¼Œé¿å…é—ªçƒã€‚
         */
        .gallery-slide.prev { /* é€»è¾‘ä¸Šçš„â€œå‰ä¸€ä¸ªâ€ï¼Œåœ¨åˆ‡æ¢åˆ°å®ƒæ—¶ä¼šä»å·¦è¾¹æ»‘å…¥ */
            transform: translateX(-100%) scale(0.8);
            opacity: 0;
            z-index: 1; 
        }
        .gallery-slide.current {
            transform: translateX(0) scale(1);
            opacity: 1;
            z-index: 3; /* æœ€å‰é¢ */
        }
        .gallery-slide.next { /* é€»è¾‘ä¸Šçš„â€œä¸‹ä¸€ä¸ªâ€ï¼Œåœ¨åˆ‡æ¢åˆ°å®ƒæ—¶ä¼šä»å³è¾¹æ»‘å…¥ */
            transform: translateX(100%) scale(0.8);
            opacity: 0;
            z-index: 1; 
        }


        @media (max-width: 768px) {
            .category-nav {
                flex-direction: column;
                align-items: center;
            }
            .ftc-submenu {
                margin-left: 0;
                padding-left: 0;
                border-left: none;
                margin-top: 10px;
                text-align: center;
            }
            .gallery-slider-wrapper {
                height: 400px; /* ç§»åŠ¨ç«¯é€‚å½“å‡å°é«˜åº¦ */
            }
            .control-button {
                width: 40px;
                height: 40px;
                font-size: 1.5em;
            }
            .gallery-slide img, .gallery-slide .video-embed {
                max-width: 95%;
                max-height: 60%;
            }
            .slide-description {
                font-size: 1em;
                padding: 0 10px;
            }
        }
    </style>
    
    <script>
        // åœ¨ DOMContentLoaded ä¹‹å‰æ‰§è¡Œï¼Œç¡®ä¿ body ç«‹å³è·å¾—ä¸»é¢˜ç±»
        (function() {
            const savedTheme = localStorage.getItem('selectedTheme') || 'theme-green';
            document.documentElement.className = savedTheme; // Apply to html element
            document.body.className = savedTheme; // Also apply to body for direct styling if needed
        })();
    </script>
</head>
<body class=""> 
    <!-- ç¡®ä¿ body class åœ¨æ­¤è¢«è®¾ç½®ï¼Œä»¥ä¾¿ CSS å˜é‡æ­£ç¡®åº”ç”¨ -->
    <script>document.body.className = document.documentElement.className;</script>

    <div id="preloader">
        <div class="rocket-container">
            <svg xmlns="http://www.w3.org/2000/svg" width="800px" height="800px" viewBox="0 0 1024 1024" class="icon" version="1.1">
                <path d="M512 301.2m-10 0a10 10 0 1 0 20 0 10 10 0 1 0-20 0Z" fill="var(--secondary-color)"/>
                <path d="M400.3 744.5c2.1-0.7 4.1-1.4 6.2-2-2 0.6-4.1 1.3-6.2 2z m0 0c2.1-0.7 4.1-1.4 6.2-2-2 0.6-4.1 1.3-6.2 2z" fill="var(--text-color-light)"/>
                <path d="M511.8 256.6c24.4 0 44.2 19.8 44.2 44.2S536.2 345 511.8 345s-44.2-19.8-44.2-44.2 19.9-44.2 44.2-44.2m0-20c-35.5 0-64.2 28.7-64.2 64.2s28.7 64.2 64.2 64.2 64.2-28.7 64.2-64.2-28.7-64.2-64.2-64.2z" fill="var(--secondary-color)"/>
                <path d="M730.7 529.5c0.4-8.7 0.6-17.4 0.6-26.2 0-179.6-86.1-339.1-219.3-439.5-133.1 100.4-219.2 259.9-219.2 439.5 0 8.8 0.2 17.5 0.6 26.1-56 56-90.6 133.3-90.6 218.7 0 61.7 18 119.1 49.1 167.3 30.3-49.8 74.7-90.1 127.7-115.3 39-18.6 82.7-29 128.8-29 48.3 0 93.9 11.4 134.3 31.7 52.5 26.3 96.3 67.7 125.6 118.4 33.4-49.4 52.9-108.9 52.9-173.1 0-85.4-34.6-162.6-90.5-218.6zM351.1 383.4c9.2-37.9 22.9-74.7 40.6-109.5a502.1 502.1 0 0 1 63.6-95.9c17.4-20.6 36.4-39.9 56.8-57.5 20.4 17.6 39.4 36.9 56.8 57.5 24.8 29.5 46.2 61.8 63.6 95.9 17.7 34.8 31.4 71.6 40.6 109.5 8.7 35.8 13.5 72.7 14.2 109.9C637.4 459 577 438.9 512 438.9c-65 0-125.3 20.1-175.1 54.4 0.7-37.2 5.5-74.1 14.2-109.9z m-90.6 449.2c-9.1-27-13.7-55.5-13.7-84.4 0-35.8 7-70.6 20.8-103.2 8.4-19.8 19-38.4 31.9-55.5 9.7 61.5 29.5 119.7 57.8 172.6-36.4 17.8-69 41.6-96.8 70.5z m364.2-85.3c-0.7-0.3-1.5-0.5-2.2-0.8-0.4-0.2-0.9-0.3-1.3-0.5-0.6-0.2-1.3-0.5-1.9-0.7-0.8-0.3-1.5-0.5-2.3-0.8-0.8-0.3-1.5-0.5-2.3-0.7l-0.9-0.3c-1-0.3-2.1-0.7-3.1-1-1.2-0.4-2.4-0.7-3.5-1.1l-3-0.9c-0.2-0.1-0.4-0.1-0.7-0.2-1.1-0.3-2.3-0.7-3.4-1-1.2-0.3-2.4-0.6-3.5-0.9l-3.6-0.9-3.6-0.9c-1-0.3-2.1-0.5-3.1-0.7-1.2-0.3-2.4-0.5-3.6-0.8-1.3-0.3-2.5-0.6-3.8-0.8h-0.3c-0.9-0.2-1.9-0.4-2.8-0.6-0.4-0.1-0.7-0.1-1.1-0.2-1.1-0.2-2.2-0.4-3.4-0.6-1.2-0.2-2.4-0.4-3.6-0.7l-5.4-0.9c-0.9-0.1-1.9-0.3-2.8-0.4-0.8-0.1-1.6-0.3-2.5-0.4-2.6-0.4-5.1-0.7-7.7-1-1.2-0.1-2.3-0.3-3.5-0.4h-0.4c-0.9-0.1-1.8-0.2-2.8-0.3-1.1-0.1-2.1-0.2-3.2-0.3-1.7-0.2-3.4-0.3-5.1-0.4-0.8-0.1-1.5-0.1-2.3-0.2-0.9-0.1-1.9-0.1-2.8-0.2-0.4 0-0.8 0-1.2-0.1-1.1-0.1-2.1-0.1-3.2-0.2-0.5 0-1-0.1-1.5-0.1-1.3-0.1-2.6-0.1-3.9-0.1-0.8 0-1.5-0.1-2.3-0.1-1.2 0-2.4 0-3.5-0.1h-13.9c-2.3 0-4.6 0.1-6.9 0.2-0.9 0-1.9 0.1-2.8 0.1-0.8 0-1.5 0.1-2.3 0.1-1.4 0.1-2.8 0.2-4.1 0.3-1.4 0.1-2.7 0.2-4.1 0.3-1.4 0.1-2.7 0.2-4.1 0.4-0.6 0-1.2 0.1-1.8 0.2l-7.8 0.9c-1.1 0.1-2.1 0.3-3.2 0.4-1 0.1-2.1 0.3-3.1 0.4-3.2 0.5-6.4 0.9-9.5 1.5-0.7 0.1-1.4 0.2-2.1 0.4-0.9 0.1-1.7 0.3-2.6 0.5-1.1 0.2-2.3 0.4-3.4 0.6-0.9 0.2-1.7 0.3-2.6 0.5-0.4 0.1-0.8 0.1-1.1 0.2-0.7 0.1-1.4 0.3-2.1 0.4-1.2 0.3-2.4 0.5-3.6 0.8-1.2 0.3-2.4 0.5-3.6 0.8-0.2 0-0.4 0.1-0.6 0.1-0.5 0.1-1 0.2-1.5 0.4-1.1 0.3-2.3 0.6-3.5 0.9-1.3 0.3-2.5 0.6-3.8 1-0.4 0.1-0.9 0.2-1.4 0.4-1.3 0.4-2.7 0.7-4 1.1-1.5 0.4-3 0.9-4.6 1.3-1 0.3-2.1 0.6-3.1 1-2.1 0.6-4.1 1.3-6.2 2-0.7 0.2-1.4 0.5-2.1 0.7-15-27.5-27.4-56.4-37-86.2-11.7-36.1-19.2-73.6-22.5-111.6-0.6-6.7-1-13.3-1.3-20-0.1-1.2-0.1-2.4-0.1-3.6-0.1-1.2-0.1-2.4-0.1-3.7 18.8-14 39.2-25.8 61-35 36.1-15.3 74.5-23 114.1-23 21.8 9.2 42.2 20.9 61 35v0.1c0 1 0 1.9-0.1 2.9 0 1.4-0.1 2.8-0.1 4.3 0 0.7 0 1.3-0.1 2-0.1 1.8-0.1 3.5-0.2 5.3-0.3 6.7-0.8 13.3-1.3 20-3.3 38.5-11 76.5-23 113-9.7 30.3-22.3 59.4-37.6 87.1z m136.8 90.9a342.27 342.27 0 0 0-96.3-73.2c29.1-53.7 49.5-112.8 59.4-175.5 12.8 17.1 23.4 35.6 31.8 55.5 13.8 32.7 20.8 67.4 20.8 103.2 0 31-5.3 61.3-15.7 90z" fill="var(--text-color-light)"/>
                <path d="M512 819.3c8.7 0 24.7 22.9 24.7 60.4s-16 60.4-24.7 60.4-24.7-22.9-24.7-60.4 16-60.4 24.7-60.4m0-20c-24.7 0-44.7 36-44.7 80.4 0 44.4 20 80.4 44.7 80.4s44.7-36 44.7-80.4c0-44.4-20-80.4-44.7-80.4z" fill="var(--secondary-color)"/>
            </svg>
            <p class="loading-text">Loading Robotics Gallery...</p>
        </div>
    </div>

    <div id="cursor-glow"></div>

    <nav class="navbar">
        <a href="index.html" class="logo">BlueDarkUP - JiangJinCH</a>
        <ul class="nav-links">
            <li><a href="index.html#about">å…³äºæˆ‘</a></li>
            <li><a href="index.html#philosophy">æˆ‘çš„ç†å¿µ</a></li>
            <li><a href="index.html#articles">ç²¾é€‰æ–‡ç« </a></li>
            <li><a href="index.html#community">ç¤¾åŒºè´¡çŒ®</a></li>
            <li><a href="index.html#projects">å¼€æºé¡¹ç›®</a></li>
            <li><a href="index.html#robotics-contributions" class="active">æœºå™¨äººé›†é”¦</a></li> <!-- æ ‡è®°å½“å‰é¡µä¸ºæ¿€æ´» -->
            <li><a href="index.html#tech-stack">æŠ€æœ¯æ ˆ</a></li>
            <li><a href="index.html#contact">è”ç³»æ–¹å¼</a></li>
        </ul>
        <div class="hamburger">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
    </nav>
    
    <main class="container">
        <section id="main-robotics-gallery-section" class="fade-in">
            <h2 class="section-title">æˆ‘çš„æœºå™¨äººè´¡çŒ®é›†é”¦</h2>
            <div class="category-nav">
                <button class="category-btn" data-category="fll">FLL</button>
                <div>
                    <button class="category-btn" data-category="ftc-parent">FTC</button>
                    <div id="ftc-submenu" class="ftc-submenu"> <!-- é»˜è®¤ä¸æ˜¾ç¤ºï¼Œé  JS æ§åˆ¶ -->
                        <button class="category-btn" data-category="ftc27570">27570 å›¢é˜Ÿ</button>
                        <button class="category-btn" data-category="ftcCommunity">å…¶ä»–ç¤¾åŒºè´¡çŒ®</button>
                    </div>
                </div>
                <button class="category-btn" data-category="robomaster">ROBOMASTER</button>
            </div>

            <!-- FLL Gallery Section -->
            <div id="fll-gallery" class="gallery-section">
                <h3 class="gallery-title">FLL (FIRST LEGO League) AquaHunter</h3>
                <p class="gallery-subtitle">FLL ç«èµ›ä¸­è‡ªä¸»æ°´ä¸‹æœºå™¨äºº AquaHunter çš„å¼€å‘ä¸å®è·µã€‚</p>
                <div class="gallery-slider-wrapper">
                    <!-- Slides will be dynamically inserted here -->
                </div>
                <div class="gallery-controls">
                    <button class="control-button prev-slide" data-target="fll">â†</button>
                    <button class="control-button next-slide" data-target="fll">â†’</button>
                </div>
                <p class="current-slide-description slide-description"></p>
            </div>

            <!-- FTC 27570 Gallery Section -->
            <div id="ftc27570-gallery" class="gallery-section">
                <h3 class="gallery-title">FTC Team 27570</h3>
                <p class="gallery-subtitle">ä½œä¸ºæ ¸å¿ƒæˆå‘˜ï¼Œæˆ‘åœ¨ FTC 27570 å›¢é˜Ÿçš„æœºå™¨äººè®¾è®¡ã€è½¯ä»¶å¼€å‘ä¸ç«èµ›å®å†µã€‚</p>
                <div class="gallery-slider-wrapper">
                    <!-- Slides will be dynamically inserted here -->
                </div>
                <div class="gallery-controls">
                    <button class="control-button prev-slide" data-target="ftc27570">â†</button>
                    <button class="control-button next-slide" data-target="ftc27570">â†’</button>
                </div>
                <p class="current-slide-description slide-description"></p>
            </div>

            <!-- FTC Community Gallery Section -->
            <div id="ftcCommunity-gallery" class="gallery-section">
                <h3 class="gallery-title">FTC å…¶ä»–ç¤¾åŒºè´¡çŒ®</h3>
                <p class="gallery-subtitle">æˆ‘ä¸º FTC ç¤¾åŒºå…¶ä»–é˜Ÿä¼æä¾›çš„æŠ€æœ¯æ”¯æŒå’Œè§†è§‰ç³»ç»Ÿå¼€å‘ã€‚</p>
                <div class="gallery-slider-wrapper">
                    <!-- Slides will be dynamically inserted here -->
                </div>
                <div class="gallery-controls">
                    <button class="control-button prev-slide" data-target="ftcCommunity">â†</button>
                    <button class="control-button next-slide" data-target="ftcCommunity">â†’</button>
                </div>
                <p class="current-slide-description slide-description"></p>
            </div>

            <!-- RoboMaster Gallery Section -->
            <div id="robomaster-gallery" class="gallery-section">
                <h3 class="gallery-title">ROBOMASTER é’å¹´èµ›</h3>
                <p class="gallery-subtitle">åœ¨ RoboMaster é’å¹´èµ›ä¸­ï¼Œè‡ªä¸»å®ˆå«æœºå™¨äºº RM-Hunter çš„ç ”å‘å†ç¨‹ã€‚</p>
                <div class="gallery-slider-wrapper">
                    <!-- Slides will be dynamically inserted here -->
                </div>
                <div class="gallery-controls">
                    <button class="control-button prev-slide" data-target="robomaster">â†</button>
                    <button class="control-button next-slide" data-target="robomaster">â†’</button>
                </div>
                <p class="current-slide-description slide-description"></p>
            </div>
        </section>
    </main>
    
    <a class="back-to-top" aria-label="è¿”å›é¡µé¢é¡¶éƒ¨"></a>
    
    <footer>
        <div class="theme-switcher">
            <label for="theme-select">é€‰æ‹©ä¸»é¢˜:</label>
            <select id="theme-select">
                <option value="theme-green">æ£®å‘¼å¸ (Forest Breath)</option>
                <option value="theme-blue">æ·±æµ·æå®¢ (Deep Sea Geek)</option>
                <option value="theme-orange">è½æ—¥ç†”é‡‘ (Molten Gold Sunset)</option>
                <option value="theme-bordeaux">æ³¢å°”å¤šçº¢ (Bordeaux Red)</option>
                <option value="theme-aurora">æå…‰ä¹‹æ¢¦ (Aurora Dream)</option>
                <option value="theme-oasis">æ²™æ¼ ç»¿æ´² (Desert Oasis)</option>
                <option value="theme-soda">å¤æ—¥æ±½æ°´ (Summer Soda)</option>
                <option value="theme-dopamine">å¤šå·´èƒºæ´¾å¯¹ (Dopamine Party)</option>
                <option value="theme-gray">èµ›åšé»‘çŸ³ (Cyber Obsidian)</option>
            </select>
        </div>
        <p>
            Designed & Built by 
            <a href="https://github.com/BlueDarkUP" target="_blank">Jiang (BlueDarkUP)</a>
        </p>
    </footer>

    <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // ==================== ä¸»é¢˜åˆ‡æ¢åŠŸèƒ½ (ä» index.html å¤åˆ¶) ====================
            const themeSelect = document.getElementById('theme-select');
            // æ³¨æ„ï¼šè¿™é‡Œå·²ç»é€šè¿‡å¤–éƒ¨è„šæœ¬åœ¨ DOMContentLoaded ä¹‹å‰è®¾ç½®äº† body classï¼Œä½†ä¸ºäº†å…¼å®¹æ€§ä¿ç•™
            const currentTheme = localStorage.getItem('selectedTheme') || 'theme-green'; 
            if (themeSelect) {
                themeSelect.value = currentTheme;
            }
            themeSelect.addEventListener('change', function(e) {
                const newTheme = e.target.value;
                localStorage.setItem('selectedTheme', newTheme);
                // é‡æ–°åŠ è½½é¡µé¢ä»¥åº”ç”¨æ–°ä¸»é¢˜ï¼Œå¹¶æ·»åŠ è¿‡æ¸¡æ•ˆæœ
                document.body.style.opacity = '0';
                document.body.style.transition = 'opacity 0.3s ease';
                setTimeout(() => location.reload(), 300);
            });

            // ==================== å¯¼èˆªèœå• (ä» index.html å¤åˆ¶) ====================
            const hamburger = document.querySelector('.hamburger');
            const navLinks = document.querySelector('.nav-links');
            const navLinksItems = document.querySelectorAll('.nav-links li a');

            hamburger.addEventListener('click', () => {
                hamburger.classList.toggle('active');
                navLinks.classList.toggle('active');
            });

            navLinksItems.forEach(link => {
                link.addEventListener('click', () => {
                    if (navLinks.classList.contains('active')) {
                        hamburger.classList.remove('active');
                        navLinks.classList.remove('active');
                    }
                });
            });

            // ==================== è¿”å›é¡¶éƒ¨æŒ‰é’® (ä» index.html å¤åˆ¶) ====================
            const backToTopButton = document.querySelector('.back-to-top');
            const navbar = document.querySelector('.navbar');

            window.addEventListener('scroll', () => {
                if (window.pageYOffset > 300) {
                    backToTopButton.classList.add('visible');
                } else {
                    backToTopButton.classList.remove('visible');
                }
                
                if (window.pageYOffset > 50) {
                    navbar.classList.add('scrolled');
                } else {
                    navbar.classList.remove('scrolled');
                }
            });
            
            backToTopButton.addEventListener('click', (e) => {
                e.preventDefault();
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });

            // ==================== å…‰æ ‡é«˜äº® (ä» index.html å¤åˆ¶) ====================
            const glow = document.getElementById('cursor-glow');
            if (glow) {
                window.addEventListener('mousemove', (e) => {
                    glow.style.left = e.clientX + 'px';
                    glow.style.top = e.clientY + 'px';
                });
            }

            // ==================== Particles.js èƒŒæ™¯ (ä» index.html å¤åˆ¶) ====================
            const getCssValue = (variable) => {
                return getComputedStyle(document.documentElement).getPropertyValue(variable).trim();
            };

            // æ³¨æ„ï¼šparticles-js å®¹å™¨åœ¨ robotics-gallery.html ä¸­ä¸å­˜åœ¨ï¼Œæ­¤ä»£ç å—åœ¨æ­¤é¡µé¢ä¸ä¼šæ‰§è¡Œ
            // å¦‚æœæ‚¨å¸Œæœ›æœºå™¨äººé›†é”¦é¡µé¢ä¹Ÿæœ‰ç²’å­æ•ˆæœï¼Œè¯·åœ¨ body å†…éƒ¨æ·»åŠ  <div id="particles-js"></div>
            if (document.getElementById('particles-js')) {
                const particleColor = getCssValue('--secondary-color');
                
                particlesJS('particles-js', {
                    "particles": {
                        "number": {
                            "value": 80,
                            "density": { "enable": true, "value_area": 800 }
                        },
                        "color": { "value": particleColor },
                        "shape": { "type": "circle" },
                        "opacity": {
                            "value": 0.6,
                            "random": true,
                            "anim": { "enable": true, "speed": 0.5, "opacity_min": 0.1, "sync": false }
                        },
                        "size": { "value": 4, "random": true },
                        "line_linked": {
                            "enable": true,
                            "distance": 120,
                            "color": particleColor,
                            "opacity": 0.3,
                            "width": 1
                        },
                        "move": {
                            "enable": true,
                            "speed": 1.5,
                            "direction": "none",
                            "random": false,
                            "straight": false,
                            "out_mode": "out",
                            "bounce": false
                        }
                    },
                    "interactivity": {
                        "detect_on": "canvas",
                        "events": {
                            "onhover": { "enable": true, "mode": "grab" },
                            "onclick": { "enable": true, "mode": "push" },
                            "resize": true
                        },
                        "modes": {
                            "grab": { "distance": 140, "line_linked": { "opacity": 0.5 } },
                            "bubble": {},
                            "repulse": {},
                            "push": { "particles_nb": 4 },
                            "remove": {}
                        }
                    },
                    "retina_detect": true
                });
            }

            // ==================== æœºå™¨äººé›†é”¦åŠŸèƒ½çš„æ ¸å¿ƒä»£ç  ====================

            // æœºå™¨äººé›†é”¦æ•°æ®
            // åœ¨è¿™é‡Œæ·»åŠ æ‚¨çš„å›¾ç‰‡å’Œè§†é¢‘è·¯å¾„ä»¥åŠæè¿°
            // type: 'image' æˆ– 'video'
            // src: å›¾ç‰‡è·¯å¾„ (ä¾‹å¦‚: 'images/fll/fll_robot_1.jpg')
            // youtubeId: YouTube è§†é¢‘ ID (ä¾‹å¦‚: 'dQw4w9WgXcQ')
            // description: å›¾ç‰‡æˆ–è§†é¢‘çš„è¯¦ç»†ä»‹ç»
            const galleryData = {
                fll: [
                    { type: 'image', src: 'images/fll/fll_robot_1.jpg', description: 'FLL æ°´ä¸‹æœºå™¨äºº AquaHunter ç¬¬ä¸€æ¬¡æˆåŠŸè¯†åˆ«ç›®æ ‡å¹¶å‡†å¤‡æŠ“å–ç‹®å­é±¼ã€‚è¿™å¼ ç…§ç‰‡æ‹æ‘„äºæˆ‘ä»¬çš„æµ‹è¯•æ°´æ± ä¸­ã€‚' },
                    { type: 'video', youtubeId: 'g4h1Y4xQoJk', description: 'AquaHunter å®Œæ•´è‡ªä¸»ä»»åŠ¡è§†é¢‘å±•ç¤ºï¼ŒåŒ…æ‹¬è·¯å¾„è§„åˆ’å’Œç›®æ ‡è·Ÿè¸ªï¼Œè¿™æ˜¯æˆ‘ä»¬èµ›å­£çš„é‡Œç¨‹ç¢‘ã€‚(ç¤ºä¾‹è§†é¢‘)' },
                    { type: 'image', src: 'images/fll/fll_team_debug.jpg', description: 'FLL å›¢é˜Ÿæˆå‘˜åœ¨æ¿€çƒˆæ¯”èµ›å‰å¤œï¼Œå…±åŒè°ƒè¯• AquaHunter çš„ä¼ æ„Ÿå™¨å’Œè¿åŠ¨ç³»ç»Ÿï¼Œç¡®ä¿ä¸‡æ— ä¸€å¤±ã€‚' },
                    { type: 'image', src: 'images/fll/fll_code_view.jpg', description: 'FLL è§†è§‰ç³»ç»Ÿä»£ç æ¦‚è§ˆï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œå®ç°äº†åŸºäºOpenCVçš„é¢œè‰²åˆ†å‰²ä¸ç›®æ ‡æ£€æµ‹ç®—æ³•ã€‚' }
                    // æ›´å¤š FLL å›¾ç‰‡/è§†é¢‘...
                ],
                ftc27570: [
                    { type: 'image', src: 'images/ftc/27570_robot_design.jpg', description: 'FTC 27570 èµ›å­£æœºå™¨äººæœ€ç»ˆè®¾è®¡å›¾ï¼Œå±•ç¤ºäº†æˆ‘ä»¬ç‹¬ç‰¹çš„æœºæ¢°è‡‚å’ŒæŠ“å–æœºæ„ã€‚' },
                    { type: 'video', youtubeId: 'wFkLwL2Cgq8', description: '27570 æœºå™¨äººåœ¨ FTC åŒºåŸŸèµ›è‡ªä¸»é˜¶æ®µé«˜åˆ†è¡¨ç°ï¼Œå®Œç¾æ‰§è¡Œäº†æ‰€æœ‰ä»»åŠ¡ï¼Œå¹¶èµ¢å¾—äº†æ§åˆ¶å¥–ã€‚(ç¤ºä¾‹è§†é¢‘)' },
                    { type: 'image', src: 'images/ftc/27570_team_china_final.jpg', description: 'FTC ä¸­å›½åŒºæ€»å†³èµ›ç°åœºï¼Œ27570 å›¢é˜Ÿæˆå‘˜åœ¨èµ›å‰è¿›è¡Œæœ€åçš„æ£€æŸ¥ã€‚' },
                    { type: 'image', src: 'images/ftc/27570_vision_system.jpg', description: 'FTC 27570 çš„æ™ºèƒ½è§†è§‰æŠ“å–ç³»ç»Ÿï¼Œé€šè¿‡ TensorFlow Lite æ¨¡å‹å®ç°å®æ—¶ç‰©ä½“è¯†åˆ«ã€‚' },
                    { type: 'video', youtubeId: 'x72vRjQ6wF8', description: '27570 æœºå™¨äººæ“ä½œå‘˜æ§åˆ¶é˜¶æ®µè§†é¢‘ï¼Œå±•ç¤ºäº† L3 çº§è¾…åŠ©é©¾é©¶çš„æµç•…æ€§ã€‚(ç¤ºä¾‹è§†é¢‘)' }
                    // æ›´å¤š FTC 27570 å›¾ç‰‡/è§†é¢‘...
                ],
                ftcCommunity: [
                    { type: 'image', src: 'images/ftc/community_19705_vision.jpg', description: 'ä¸º FTC 19705 çº¢å¿ƒæœºå™¨äººé˜Ÿå¼€å‘çš„ç«èµ›çº§è§†è§‰ç³»ç»Ÿï¼Œåœ¨ä¼‘æ–¯é¡¿ä¸–é”¦èµ›ä¸ŠåŠ©åŠ›ä»–ä»¬å–å¾—äº†ä¼˜å¼‚æˆç»©ã€‚' },
                    { type: 'video', youtubeId: 'Z9RkQxT8v4c', description: '19705 é˜Ÿåœ¨ä¼‘æ–¯é¡¿ä¸–é”¦èµ›ä½¿ç”¨æˆ‘ä»¬è§†è§‰ç³»ç»Ÿçš„å®æˆ˜å½•åƒï¼Œå±•ç¤ºäº†å…¶é«˜ç¨³å®šæ€§å’ŒæŠ“å–é€Ÿåº¦ã€‚(ç¤ºä¾‹è§†é¢‘)' },
                    { type: 'image', src: 'images/ftc/community_28119_training.jpg', description: 'ä¸º FTC æ–°é˜Ÿä¼ 28119 è¿›è¡ŒæŠ€æœ¯è®²è§£ï¼Œåˆ†äº«è§†è§‰ç³»ç»Ÿå¼€å‘å’Œæœºå™¨äººç¼–ç¨‹ç»éªŒã€‚' }
                    // æ›´å¤š FTC ç¤¾åŒºè´¡çŒ®å›¾ç‰‡/è§†é¢‘...
                ],
                robomaster: [
                    { type: 'video', youtubeId: '9bZkp7q19f0', description: 'RoboMaster é’å¹´èµ›è‡ªä¸»å®ˆå«æœºå™¨äºº RM-Hunter çš„æ¼”ç¤ºè§†é¢‘ï¼Œå±•ç¤ºäº†å…¶è§†è§‰è‡ªç„ä¸PIDæ§åˆ¶ç®—æ³•çš„ååŒå·¥ä½œã€‚(ç¤ºä¾‹è§†é¢‘)' },
                    { type: 'image', src: 'images/robomaster/rm_hunter_physical.jpg', description: 'RM-Hunter æœºå™¨äººå®ç‰©å›¾ï¼Œå±•ç¤ºäº†ç´§å‡‘çš„ç»“æ„å’Œé«˜æ€§èƒ½çš„ä¼ æ„Ÿå™¨é›†æˆã€‚' },
                    { type: 'image', src: 'images/robomaster/rm_control_board.jpg', description: 'RM-Hunter çš„æ ¸å¿ƒæ§åˆ¶ç”µè·¯æ¿ï¼Œé›†æˆäº† Jetson Nano å’Œè‡ªå®šä¹‰é©±åŠ¨æ¨¡å—ã€‚' }
                    // æ›´å¤š RoboMaster å›¾ç‰‡/è§†é¢‘...
                ]
            };

            const gallerySections = document.querySelectorAll('.gallery-section');
            const categoryButtons = document.querySelectorAll('.category-btn');
            const ftcParentButton = document.querySelector('[data-category="ftc-parent"]');
            const ftcSubmenu = document.getElementById('ftc-submenu');
            
            let currentGalleryState = {}; // ç”¨äºå­˜å‚¨æ¯ä¸ªç”»å»Šçš„å½“å‰ç´¢å¼•

            // æ¸²æŸ“ç”»å»Šå†…å®¹
            function renderGallery(categoryId) {
                const data = galleryData[categoryId];
                const galleryWrapper = document.querySelector(`#${categoryId}-gallery .gallery-slider-wrapper`);
                const descriptionDisplay = document.querySelector(`#${categoryId}-gallery .current-slide-description`);
                galleryWrapper.innerHTML = ''; // æ¸…ç©ºç°æœ‰å†…å®¹

                if (!data || data.length === 0) {
                    galleryWrapper.innerHTML = `<p style="color:var(--text-color-dark); margin: auto;">æš‚æ— å†…å®¹ã€‚</p>`;
                    descriptionDisplay.textContent = '';
                    return;
                }

                data.forEach((item, index) => {
                    const slide = document.createElement('div');
                    slide.classList.add('gallery-slide');
                    slide.dataset.index = index;
                    
                    if (item.type === 'image') {
                        const img = document.createElement('img');
                        img.src = item.src;
                        img.alt = item.description;
                        slide.appendChild(img);
                    } else if (item.type === 'video') {
                        const videoEmbed = document.createElement('div');
                        videoEmbed.classList.add('video-embed');
                        // ä½¿ç”¨ enablejsapi=1 å…è®¸é€šè¿‡ JavaScript æ§åˆ¶æ’­æ”¾ï¼Œrel=0 é˜²æ­¢æ’­æ”¾ç›¸å…³è§†é¢‘
                        // æ³¨æ„ï¼šYouTube è‡ªåŠ¨æ’­æ”¾ç­–ç•¥å¯èƒ½ä¼šé™åˆ¶æ— ç”¨æˆ·äº¤äº’çš„è‡ªåŠ¨æ’­æ”¾
                        videoEmbed.innerHTML = `<iframe src="https://www.youtube.com/embed/${item.youtubeId}?enablejsapi=1&rel=0" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
                        slide.appendChild(videoEmbed);
                    }
                    galleryWrapper.appendChild(slide);
                });

                // åˆå§‹åŒ–å½“å‰ç´¢å¼•
                if (currentGalleryState[categoryId] === undefined) {
                     currentGalleryState[categoryId] = { index: 0 };
                }
                currentGalleryState[categoryId].slides = galleryWrapper.querySelectorAll('.gallery-slide');
                updateGalleryDisplay(categoryId);
            }

            // æ›´æ–°ç”»å»Šæ˜¾ç¤º
            function updateGalleryDisplay(categoryId) {
                const state = currentGalleryState[categoryId];
                if (!state || state.slides.length === 0) return;

                const currentDescriptionDisplay = document.querySelector(`#${categoryId}-gallery .current-slide-description`);
                
                state.slides.forEach((slide, i) => {
                    const videoIframe = slide.querySelector('iframe');
                    // æš‚åœæ‰€æœ‰è§†é¢‘ï¼Œé˜²æ­¢èƒŒæ™¯æ’­æ”¾
                    if (videoIframe && videoIframe.contentWindow.postMessage) {
                        videoIframe.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}', '*');
                    }

                    // ç§»é™¤æ‰€æœ‰çŠ¶æ€ç±»ï¼Œé‡ç½® z-index
                    slide.classList.remove('current', 'prev', 'next');
                    slide.style.zIndex = '1'; 

                    if (i === state.index) {
                        slide.classList.add('current');
                        slide.style.zIndex = '3'; // æœ€å‰é¢
                        currentDescriptionDisplay.textContent = galleryData[categoryId][state.index].description;
                        // æ’­æ”¾å½“å‰è§†é¢‘
                        if (videoIframe && videoIframe.contentWindow.postMessage) {
                             // ä½¿ç”¨ try-catch é¿å…ä¸€äº›æµè§ˆå™¨æ²™ç›’é™åˆ¶
                            try {
                                videoIframe.contentWindow.postMessage('{"event":"command","func":"playVideo","args":""}', '*');
                            } catch (e) {
                                console.warn("Failed to play video:", e);
                            }
                        }
                    } else if (i === (state.index - 1 + state.slides.length) % state.slides.length) {
                        slide.classList.add('prev');
                        slide.style.zIndex = '2'; // æ¯”å½“å‰ä½ï¼Œæ¯”å…¶ä»–éæ¿€æ´»çš„é«˜
                    } else if (i === (state.index + 1) % state.slides.length) {
                        slide.classList.add('next');
                        slide.style.zIndex = '2'; // æ¯”å½“å‰ä½ï¼Œæ¯”å…¶ä»–éæ¿€æ´»çš„é«˜
                    }
                });
            }

            // åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª/ä¸Šä¸€ä¸ªå›¾ç‰‡/è§†é¢‘
            function navigateGallery(categoryId, direction) {
                const state = currentGalleryState[categoryId];
                if (!state || state.slides.length === 0) return;

                state.index = (state.index + direction + state.slides.length) % state.slides.length;
                updateGalleryDisplay(categoryId);
            }

            // ç±»åˆ«åˆ‡æ¢é€»è¾‘
            categoryButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const category = this.dataset.category;

                    // å¤„ç† FTC å­èœå•æ˜¾ç¤º/éšè—
                    if (category === 'ftc-parent') {
                        // åˆ‡æ¢å­èœå•æ˜¾ç¤ºçŠ¶æ€
                        const isSubmenuVisible = ftcSubmenu.style.display === 'flex';
                        ftcSubmenu.style.display = isSubmenuVisible ? 'none' : 'flex';

                        // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„ active çŠ¶æ€ï¼Œåªæ¿€æ´»çˆ¶æŒ‰é’®
                        categoryButtons.forEach(btn => btn.classList.remove('active'));
                        this.classList.add('active');
                        
                        // å¦‚æœå­èœå•æ‰“å¼€ï¼Œä¸æ˜¾ç¤ºä»»ä½•ç”»å»Šï¼Œç›´åˆ°é€‰æ‹©å­ç±»åˆ«
                        // å¦‚æœå­èœå•å…³é—­ï¼Œä¹Ÿä¸æ˜¾ç¤ºä»»ä½•ç”»å»Š
                        gallerySections.forEach(section => section.classList.remove('active'));
                        return; 
                    } else {
                        // å¦‚æœç‚¹å‡»çš„æ˜¯é FTC çˆ¶æŒ‰é’®ï¼Œåˆ™éšè— FTC å­èœå•
                        ftcSubmenu.style.display = 'none';
                    }

                    // ç§»é™¤æ‰€æœ‰æŒ‰é’®çš„ active çŠ¶æ€ï¼Œå¹¶æ¿€æ´»å½“å‰ç‚¹å‡»çš„æŒ‰é’®
                    categoryButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    // å¦‚æœæ˜¯ FTC å­ç±»åˆ«æŒ‰é’®ï¼Œä¹Ÿæ¿€æ´» FTC çˆ¶æŒ‰é’®
                    if (category === 'ftc27570' || category === 'ftcCommunity') {
                        ftcParentButton.classList.add('active');
                    }

                    // æ˜¾ç¤ºå¯¹åº”çš„ç”»å»Š Section
                    gallerySections.forEach(section => {
                        if (section.id === `${category}-gallery`) {
                            section.classList.add('active');
                            renderGallery(category); // æ¸²æŸ“å¹¶åˆå§‹åŒ–ç”»å»Š
                        } else {
                            section.classList.remove('active');
                        }
                    });
                });
            });

            // è½®æ’­æ§åˆ¶æŒ‰é’®äº‹ä»¶
            document.querySelectorAll('.control-button').forEach(button => {
                button.addEventListener('click', function() {
                    const targetCategory = this.dataset.target;
                    const direction = this.classList.contains('next-slide') ? 1 : -1;
                    navigateGallery(targetCategory, direction);
                });
            });

            // é¼ æ ‡æ»šè½®äº‹ä»¶ (ä»…å¯¹å½“å‰æ¿€æ´»çš„ç”»å»Šæœ‰æ•ˆ)
            document.querySelectorAll('.gallery-slider-wrapper').forEach(wrapper => {
                wrapper.addEventListener('wheel', function(event) {
                    const activeSection = this.closest('.gallery-section.active');
                    if (!activeSection) return; // åªæœ‰å½“wrapperåœ¨æ¿€æ´»çš„sectionå†…æ‰å“åº”

                    event.preventDefault(); // é˜»æ­¢é¡µé¢æ»šåŠ¨

                    const categoryId = activeSection.id.replace('-gallery', '');
                    const direction = event.deltaY > 0 ? 1 : -1; // deltaY > 0 æ»šè½®å‘ä¸‹ (ä¸‹ä¸€å¼ ), < 0 æ»šè½®å‘ä¸Š (ä¸Šä¸€å¼ )
                    navigateGallery(categoryId, direction);
                }, { passive: false }); // ä½¿ç”¨ passive: false ç¡®ä¿ preventDefault æœ‰æ•ˆ
            });

            // åˆå§‹åŠ è½½ï¼šé»˜è®¤æ˜¾ç¤º FLL ç”»å»Š
            // ç¡®ä¿é¡µé¢åŠ è½½åï¼Œæœ‰ä¸€ä¸ªé»˜è®¤çš„æ¿€æ´»çŠ¶æ€
            // æ¨¡æ‹Ÿç‚¹å‡» FLL æŒ‰é’®ï¼Œè§¦å‘åˆå§‹æ¸²æŸ“å’Œæ˜¾ç¤º
            document.querySelector('.category-btn[data-category="fll"]').click(); 

            // ç¡®ä¿é¡µé¢åŠ è½½æ—¶ fade-in æ•ˆæœåº”ç”¨äºä¸»å†…å®¹åŒºåŸŸ
            const mainGallerySection = document.getElementById('main-robotics-gallery-section');
            if (mainGallerySection) {
                mainGallerySection.classList.add('is-visible');
            }
        });

        // ==================== é¢„åŠ è½½åŠ¨ç”» (ä» index.html å¤åˆ¶) ====================
        const preloader = document.getElementById('preloader');
        window.addEventListener('load', function() {
            setTimeout(() => {
                if (preloader) {
                    preloader.classList.add('loaded');
                }
            }, 2600); 
        });
    </script>
</body>
</html>
